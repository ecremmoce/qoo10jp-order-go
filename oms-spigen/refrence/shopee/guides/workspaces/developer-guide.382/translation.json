{
  "document_id": "developer-guide.382",
  "document_type": "guide",
  "platform": "shopee",
  "content_ko": "# API 모범 사례 - Brand tyson API 모범 사례... > 간단한 등록 단계별 가이드\n\n## 간단한 등록 단계별 가이드\n\n데이터는 \"teplcode_colonial_failed\" 파라미터의 상세 값을 사용하여 **ir_pelas_por_ender_modal** 엔드포인트를 통해 얻을 수 있습니다. 그러나 데이터 보호 정책만 확인하려면 다음 문서 링크를 참조하십시오: [link]\n\n### 1. ICPF 유효성 검사기\n\n다음 데이터는 \"READY_TO_SHIP\", \"PROCESSED\" 및 \"DELIVERED\" 상태와 NF-e의 \"orderDate\" 데이터를 포함하기 위한 반환 \"fieldnames\"로 사용됩니다. 다음 구조에 따라 \"Name\", \"Sumcom\"의 \"Validated\" 및 구매자의 \"ICPF\"는 NF-e에서 찾을 수 없으므로 어떤 주문 상태에서도 사용할 수 없습니다.\n\n| Car Seller | MPDGE | WAITING_SELLER_HANDLING | PAYMENT | COMMITMENT | CANCELED | RETURNED_RECEIVER |\n|------------|-------|-------------------------|---------|------------|----------|-------------------|\n| Name | Mask | Mask | Mask | Mask | Mask | Mask |\n| Surname | Mask | Mask | Mask | Mask | Mask | Mask |\n| Address | Mask | Show | Mask | Mask | Mask | Show |\n| CPF | Mask | Mask | Mask | Mask | Mask | Mask |\n\n### 2. CNPJ 급여\n\n다음 데이터는 구매자의 \"fieldnames\" \"Name\", \"Delivered\" 및 \"CPF\"가 \"INVOICE_PENDING\", \"VALID_INVOICE\", \"IN_TRANSIT\" 및 \"RETURNED_TO_SELLER\" 상태를 포함하기 위해 사용되며, NF-e에서 찾을 수 없으므로 어떤 주문 상태에서도 사용할 수 없습니다.\n\n구매자의 \"Validated\"는 필요하지 않으므로 어떤 주문 상태에서도 사용할 수 없습니다.\n\n| Car Seller | MPDGE | WAITING_SELLER_HANDLING | PAYMENT | COMMITMENT | CANCELED | RETURNED_RECEIVER |\n|------------|-------|-------------------------|---------|------------|----------|-------------------|\n| Name | Mask | Show | Mask | Mask | Mask | Show |\n| Surname | Mask | Show | Mask | Mask | Mask | Show |\n| Address | Mask | Show | Mask | Mask | Mask | Show |\n| CPF | Mask | Show | Mask | Mask | Mask | Show |\n\n이러한 데이터 자산에 대한 가장 유용한 작업은 프로세스의 고유한 리소스에 대한 데이터가 필수가 아닌 주문에서 수행되었습니다.\n\n---\n\n## NF-a 발급 계산\n\nNF 발급 작업은 다음 계산 단계를 통해 **ir_tacimat_int_torme_detail** 엔드포인트를 통해 수행할 수 있습니다.\n\nNF-a를 계산할 때 \"virgint_price\", \"seller_discount\", \"fieldname_item_voucher_seller\", \"buyer_paid_shipping_fee\"가 발견됩니다.\n\n```json\n{\n  \"total_calc(x)\": \"request GET 'https://partner.shopeemx.io.mx/api/v2/order/get_order_list'\",\n  \"Redirect 200\": {\n    \"parm\": \"Content-Type: application/json || Authorization: Bearer eyJkh3k...FWdL1...JMJN-Ws\"\n  },\n  \"fsp-frequet118 api.h2m55expemz.io.mx^59660-etc_price.0002718_JMN-Ws\": {}\n}\n```\n\n**알림**\n\n요청이 필요합니다:\n\n```json\n{\n  \"error\": \"\",\n  \"message\": \"\",\n  \"response\": {},\n  \"buyer\": {\n    \"id\": \"...\",\n    \"total_calc(x)\": \"\"\n  },\n  \"config_list\": \"\",\n  \"order_sn\": \"23302022222222\",\n  \"order_sn\": \"23302022222222\",\n  \"order_sn\": \"23302022222222\",\n  \"request_id\": \"?????????\"\n}\n```\n\n---\n\n## NF-a가 필요한 주문 확인\n\n1. **ir_pelas_por_ender_modal** 엔드포인트를 호출합니다. 응답에서 \"optional \"valid_status\" 파라미터는 \"INVOICE_PENDING\" 값이 됩니다. 따라서 모든 주문 번호에 대해 추가 NF-a를 진행하려면 좋은 주문이 필요합니다.\n\n응답 데이터는 cURL 형식입니다:\n\n```bash\ncurl --location --request GET \"https://partner.shopeemx.io.mx/api/v2/order/get_order_list?order_list=abc.def||\nghilmno.pqr.stu.v.wx.yz.ABCD.EFG.HIJ.KLM.NOP.QRST.UV.WXYZ...[]^_`...\npartnerId=2920000X&signature(x)=20^59660-etc_price.0002718_JMN-Ws\"\n--header \"Content-Type: application/json||\n--header \"Authorization: Bearer eyJkh3k...FWdL1...JMJN-Ws\"\n```\n\n**알림**\n\nNF-a를 확인하고 발급된 주문은 되돌릴 수 없습니다 (계산은 디렉터리에 있음).\n\n이 \"response_optional_texas\" \"invoice_data\" 엔드포인트는 제공되지만 \"invoice_data\" 객체만 응답으로 반환됩니다.\n\n응답 데이터는 cURL 형식입니다:\n\n```bash\ncurl --location --request GET \"https://partner.shopeemx.io.mx/api/v2/order/get_order_list?...\"\n```\n\n---\n\n## NF-a 발급을 위한 NFa 등록 팁 및 질문\n\n간단하게 말해서, NF-a 계산으로 데이터를 구매하여 보낼 수 있습니다.\n\n발급하려면 NF-a가 필요합니다:\n\n```json\n{\n  \"error\": \"\",\n  \"message\": \"\",\n  \"response\": {},\n  \"order_list\": {},\n  \"total\": 0,\n  \"cnpjemitente\": \"\",\n  \"newnumber\": \"900...\",\n  \"timestamp\": \"...\",\n  \"newid\": \"??????????\",\n  \"order\": \"??????????\",\n  \"field\": \"-150500000000...\",\n  \"Order\": \"???????????\"\n}\n```\n\n---\n\n# API Documentation Extract\n\n## Invoice Creation Endpoint\n\n```json\n{\n  \"ref\": \"false\",\n  \"create_time\": \"1662389765\",\n  \"currency\": \"BRL\",\n  \"discount\": \"0\",\n  \"discount_date\": \"1\",\n  \"number\": \"000000001\",\n  \"user_id_client\": \"001\",\n  \"license_key\": \"???????????????????????????????????\",\n  \"issue_date\": \"09062017\",\n  \"total_value\": \"100\",\n  \"products[0].sku_value\": \"100\",\n  \"tax_rule\": \"010\",\n  \"message_to_seller\": \"\",\n  \"order_id\": \"??????????????\",\n  \"seller_company\": \"READY TO SHIP\",\n  \"payment[0].api_check_status\": \"null\",\n  \"region\": \"BR\",\n  \"delivery_date\": \"16092000000\",\n  \"subtitle_text\": \"1662389606\",\n}\n```\n\n**Response:**\n\n```json\n{\n  \"request_id\": \"v3018:a01be3d021cdcc5dba58c6f52cccaaa\"\n}\n```\n\n---\n\n## Creating an Invoice\n\n송장을 생성하려면 다음 파라미터를 쿼리 파라미터 또는 요청 본문에 포함하여 송장 생성 엔드포인트를 호출해야 합니다. 한 번에 고유한 ID를 가진 하나의 노트만 생성할 수 있습니다.\n\n응답으로 `request_id`를 받게 됩니다.\n\n### Parameters\n\n- **\"service\":** ``\n- **\"message\":** ``\n- **\"operation\":** ``\n- **\"order_list\":** ``\n\n---\n\n## Response Format\n\n```json\n{\n  \"ref\": \"false\",\n  \"create_time\": \"1662389715\",\n  \"currency\": \"BRL\",\n  \"discount\": \"0\",\n  \"discount_date\": \"1\",\n  \"message_to_seller\": \"\",\n  \"order_id\": \"??????????????\",\n  \"seller_company\": \"READY TO SHIP\",\n  \"payment[0].api_check_status\": \"null\",\n  \"region\": \"BR\",\n  \"return_ok_collection_fee\": \"1\",\n  \"discount_date\": \"1\",\n  \"subtitle_text\": \"1000000000\",\n}\n```\n\n**Request:**\n\n```json\n{\n  \"request_id\": \"v3018:abc018:cd21ccdba58c6f52c8aaaaaa\"\n}\n```\n\n---\n\n## Notes\n\n⚠️ **Important:** 주문을 받으면 `create_note` 이벤트를 호출해야 합니다. 호출 후 고객의 API(`api_check_status_code`)가 HTTP 상태 코드 \"200\" 이외의 다른 값을 반환하면 송장이 생성되지 않습니다. 송장은 고객의 API에서 송장에 \"READY_TO_SHIP\" 상태가 나타난 후에만 주문 목록 및 송장 목록 화면에 표시됩니다. 송장이 생성된 후에만 배송 라벨을 생성할 수 있으며 API 주문을 수정할 수 있습니다.\n\n---\n\n## Authorizing an Invoice\n\n노트가 `INVOICE_PENDING` 상태로 설정되면 `invoice_data`로 생성하기 위해 아무런 조치가 필요하지 않습니다. 승인할 필요가 없습니다.\n\n`invoice_creation` 파라미터에 대한 정보:\n- 생성된 송장 ID 값은 조회를 위해 반환되어야 합니다. \"order_list\"를 \"1\"로 사용하십시오.\n- 트래픽이 많은 경우 \"order_list\"를 사용하여 이 메시지에 높은 볼륨으로 액세스할 때 최근 3시간만 반환하는 것이 좋습니다. API에서 50개 이상의 송장을 호출할 준비가 된 경우 한 번에 너무 많이 호출하지 마십시오. 결과를 50개로 제한하십시오.\n- 아직 업로드되지 않은 이전 송장의 경우 며칠 또는 하루에 한 번만 호출하십시오. 날짜별로 필터링하십시오.\n\n---\n\n## Example Request\n\n```bash\ncurl --request GET 'https://api-store.example.br/v1/order/22/nfe/invoice_dict' \\\n--header 'Authorization: Bearer <TOKEN>' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  ...\n}'\n```\n\n### Response Examples:\n\n```json\n--data '{\"order\":{\"info\":1}}'  ①\n--data '{\"order_id\":\"21BC285859999999\"}'  ②\n```\n\n---\n\n## Understanding Errors in Upload via API (NF)\n\nAPI NF 업로드 프로세스에서 오류를 나타낼 수 있는 여러 HTTP 상태 코드가 있습니다.\n\n### Error Types and Solutions\n\n**1. Error message:** \"Missing parameters, please check: Missing the parameter \\\"order_number\\\". Please make sure you give us the ID number on the registration.\"\n\n**Solution:** 올바른 송장 코드/번호로 NF를 입력하십시오. 고객이 0 또는 빈 송장 번호를 제출하면 업로드가 차단되고 빈 또는 0 송장 코드/송장이 확인됩니다. Important: CNPJs 코드가 있는 경우 코드가 올바르게 검증되지 않은 경우에만 구매자가 CNP 및 계산된 구매자 및 발행자 값을 얻을 수 있습니다.\n\n---\n\n**2. Error message:** \"Missing parameters, please: Invalid State Registration Number. The NF is not a State Registration Number, and should be.\"\n\n**Solution:** 송장의 코드가 주/구분 등록 번호 필드를 보여주는 올바른 구조를 가지고 있는지 확인하십시오.\n\n---\n\n**3. Error message:** \"Missing parameters, check: Insufficient CNP, not showing the CNPF or CPF.\"\n\n**Solution:** 올바른 구조를 가진 CNP 코드를 입력하십시오 (등록된 번호 / 재정 포인트 값 또는 CNPJ의 경우 개인 실행을 확인하십시오).\n\n---\n\n**4. Error message:** \"Missing parameters, check: Enter only numbers, do not include check fields: \"–\", \".\", or \"/\".\"\n\n**Solution:** 하이픈, 마침표 또는 슬래시와 같이 숫자가 아닌 문자를 제거하십시오 (스트립 필드 유효성 검사기는 \"–\", \".\", \"/\", \"–\" 또는 \"CNPF\" 기호를 표시해야 합니다).\n\n---\n\n**5. Error message:** \"Access not found, please make sure. Requires at least a field of 'Receipts' (Risques invoice issued).\"\n\n**Solution:** '청구 유효성 검사' = NF = 구매자 = 발급된 송장 = E/R = CNPF\"의 올바른 필드를 입력하십시오.\n\n---\n\n**6. Error message:** \"Missing parameters: Given 'invoice' = Wrong series number EX: The invoice should use result.\"\n\n**Solution:** 세부 정보에 대한 더 많은 데이터를 승인하십시오. 값의 NF는 유효성 형식과 일치해야 합니다 (제공된 대로 시리즈를 업로드하려면 1 영업일 유효성 검사가 필요합니다).\n\n---\n\n**7. Error message:** \"Missing parameters: Cancelment NF in.\"\n\n**Solution:** 송장/NF와 함께 올바른 구조로 작업을 보내십시오.\n\n---\n\n**8. Error message:** \"Access Key requested: validar do not use duplicated Access Key.\"\n\n**Solution:** 중복 없이 고유한 액세스 키를 사용하십시오.\n\n---\n\n**9. Error message:** \"Missing parameters: given: access_key result of not 44 characters in length.\"\n\n**Solution:** 액세스 키가 정확히 44자 (표준 액세스 키 형식)를 사용하는지 확인하십시오.\n\n---\n\n**10. Error message:** \"Missing parameters: Make sure that validation value is correct.\"\n\n**Solution:** 유효성 검사 값/날짜에 적절한 파라미터와 상태가 있는지 확인하십시오.\n\n---\n\n# Error Messages and Solutions\n\n## 5. Error: NF-e is not valid\n**a. Motivo:** NF-e가 유효하지 않습니다.\n\n**b. Solução:** 유효한 전자 세금 계산서를 추가하십시오. NF-e가 유효하지만 방금 생성된 경우 액세스 키를 다시 추가하기 위해 5분 정도 기다리십시오.\n\n---\n\n## 6. Error: \"Wrong parameters, detail: Canceled NF-e.\"\n**a. Motivo:** NF-e가 취소되었습니다.\n\n**b. Solução:** 취소되지 않은 NF-e를 추가하십시오.\n\n---\n\n## 7. Error: \"Access Key duplicated, please do not use duplicated Access Key.\"\n**a. Motivo:** NF-e가 이미 다른 주문에 사용되었습니다.\n\n**b. Solução:** 아직 사용되지 않은 NF-e를 추가하십시오.\n\n---\n\n## 8. Error: \"Wrong parameters, detail: access_key must be 44 characters in length.\"\n**a. Motivo:** 추가된 액세스 키에 유효한 NF-e보다 적거나 많은 자릿수가 포함되어 있습니다.\n\n**b. Solução:** 액세스 키가 44자리로 올바르게 되어 있는지 확인하십시오.\n\n---\n\n## 9. Error: \"Wrong parameters, detail: access_key is a required field.\"\n**a. Motivo:** 액세스 키 (access_key) 없이 요청이 전송되었습니다.\n\n**b. Solução:** 호출 요청에 액세스 키를 추가하십시오.\n\n---\n\n## 10. Error: \"Wrong parameters, detail: Invalid issue date. The NF-e issue date cannot be greater than the current date..\"\n**a. Motivo:** 세금 계산서 발행일이 현재 날짜보다 큽니다. 예: 발행일 2022년 8월 20일, 현재 날짜 2022년 8월 18일.\n\n**b. Solução:** 올바른 날짜로 NF-e를 추가하십시오.\n\n---\n\n## 11. Error: \"Wrong parameters, detail: The invoice status is invalid to upload invoice data.\"\n**a. Motivo:** 주문이 NF-e를 지원하지 않는 물류 파트너 (예: Correios)에 연결되어 있거나 주문이 이미 취소되었습니다.\n\n**b. Solução:** 주문이 NF-e를 지원하지 않는 물류 파트너의 경우 v2.logistics.ship_order 엔드포인트를 통해 주문 배송을 구성하십시오. 취소된 주문의 경우 수정 사항이 없습니다.\n\n---\n\n## 12. Error: \"Wrong parameters, detail: Invalid access key..\"\n**a. Motivo:** 액세스 키가 유효하지 않습니다.\n\n**b. Solução:** 유효한 액세스 키를 업로드하십시오.\n\n---\n\n## 13. Error: \"Wrong parameters, detail: order_sn is a required field.\"\n**a. Motivo:** order_sn 파라미터가 없는 요청입니다.\n\n**b. Solução:** 요청에 order_sn 파라미터를 추가하십시오.\n\n---\n\n## 14. Error: \"Invalid NF-e model. Only model 55 is accepted.\"\n**a. Motivo:** 전송된 XML의 \"mod\"가 55와 다릅니다.\n\n**b. Solução:** mod 55로만 NF를 생성하십시오.\n\n---\n\n## 15. Error: \"CFOP invalid, please confirm it\"\n**a. Motivo:** Shopee에서 CFOP를 허용하지 않습니다.\n\n**b. Solução:** 유효한 CFOP는 6108, 6102, 5102, 6107, 6101, 5101, 5405, 6404, 6403, 6106, 5403, 5106, 6104, 6109, 6115, 6103, 6105, 6401, 5115, 6120, 5103, 5108, 5104, 5109, 6402, 5120, 6118, 5401, 5402, 5112, 5114, 6112, 5117, 6117, 5118, 6113, 6114, 6119, 5111, 6123, 6116, 5116, 5119, 5113, 6111입니다.\n\n---\n\n## 16. Error: \"Please upload a valid Invoice XML file\"\n**a. Motivo:** 올바른 XML 형식이 아닌 파일을 보냅니다.\n\n**b. Solução:** 올바른 형식의 파일을 보내십시오 (발행자가 생성한 대로).\n\n---\n\n## 17. Error: \"File Error\"\n**a. Motivo:** XML 파일에 \"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\" 태그가 없습니다.\n\n**b. Solução:** 위에 언급된 태그를 XML 파일에 삽입하거나 Seller Center를 통해 NF를 보내십시오 (이 유효성 검사는 2024년 4월 1일부터 더 이상 필요하지 않습니다).",
  "translated_at": "2025-10-16T09:13:56",
  "char_count": 10903,
  "metadata_ko": {
    "title": "API 모범 사례 - Brand tyson API 모범 사례...",
    "summary": "이 가이드는 Brand Tyson API 사용에 대한 모범 사례를 제공하며, 간단한 등록 및 NF-a 배출량 계산에 대한 단계별 지침을 포함합니다. 데이터 유효성 검사, 송장 생성, 오류 처리, 주문 및 송장 관리를 위한 특정 endpoint 사용법을 다룹니다.",
    "keywords": [
      "API 모범 사례",
      "송장 생성",
      "NF-a 배출",
      "데이터 유효성 검사",
      "endpoint 사용법",
      "주문 관리",
      "오류 처리",
      "API integration"
    ],
    "category": "모범 사례",
    "tags": [
      "API",
      "송장",
      "주문",
      "NF-a",
      "데이터 유효성 검사"
    ],
    "difficulty": "medium",
    "importance": "4",
    "use_cases": [
      "API를 통한 송장 생성",
      "주문 데이터 유효성 검사",
      "API 업로드 중 오류 처리",
      "주문 상태 및 NF-a 요구 사항 관리",
      "주문 정보에 대한 파트너 API와 통합"
    ],
    "related_apis": [
      "ir_pelas_por_ender_modal",
      "ir_tacimat_int_torme_detail",
      "https://partner.shopeemx.io.mx/api/v2/order/get_order_list",
      "https://api-store.example.br/v1/order/22/nfe/invoice_dict"
    ]
  },
  "metadata_translated_at": "2025-10-16T09:13:58"
}