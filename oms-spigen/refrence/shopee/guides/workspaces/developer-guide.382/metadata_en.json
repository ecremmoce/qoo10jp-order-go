{
  "document_id": "developer-guide.382",
  "document_type": "guide",
  "platform": "shopee",
  "extracted_at": "2025-10-16T09:13:28",
  "extracted_text": "# API Best Practices - Brand tyson API Best Prac... > Passo a passo para bade\n\n## Passo a passo para cadastro simples\n\nOs dados podem ser obtidos através do endpoint **ir_pelas_por_ender_modal** com os valores detalhados do parâmetro \"teplcode_colonial_failed\". No entanto, para confirmar apenas políticas de proteção de dados, dessa o link da documentação: [link]\n\n### 1. Validador ICPF\n\nOs dados a seguir servem a \"fieldnames\" de retornação para conter com status \"READY_TO_SHIP\", \"PROCESSED\" e \"DELIVERED\" tanto com dados de \"orderDate\" da NF-e. Seguindo a estrutura seguinte apresenta em determinação a \"Name\", \"Sumcom\" de \"Validated\" e \"ICPF\" de Buyer não será disponibilizado em nenhum status de order, pois não é encontrado na NF-e.\n\n| Car Seller | MPDGE | WAITING_SELLER_HANDLING | PAYMENT | COMMITMENT | CANCELED | RETURNED_RECEIVER |\n|------------|-------|-------------------------|---------|------------|----------|-------------------|\n| Name | Mask | Mask | Mask | Mask | Mask | Mask |\n| Surname | Mask | Mask | Mask | Mask | Mask | Mask |\n| Address | Mask | Show | Mask | Mask | Mask | Show |\n| CPF | Mask | Mask | Mask | Mask | Mask | Mask |\n\n### 2. Salário CNPJ\n\nOs dados a seguir servem a \"fieldnames\" \"Name\", \"Delivered\" e \"CPF\" do Buyer para conter com status \"INVOICE_PENDING\", \"VALID_INVOICE\", \"IN_TRANSIT\" e \"RETURNED_TO_SELLER\" não será disponibilizado em nenhum status de order, pois não é encontrado na NF-e.\n\nO \"Validated\" de Buyer não será disponibilizado em nenhum status de order, pois não é necessário.\n\n| Car Seller | MPDGE | WAITING_SELLER_HANDLING | PAYMENT | COMMITMENT | CANCELED | RETURNED_RECEIVER |\n|------------|-------|-------------------------|---------|------------|----------|-------------------|\n| Name | Mask | Show | Mask | Mask | Mask | Show |\n| Surname | Mask | Show | Mask | Mask | Mask | Show |\n| Address | Mask | Show | Mask | Mask | Mask | Show |\n| CPF | Mask | Show | Mask | Mask | Mask | Show |\n\nEstas ações mais úteis sobre ativos de dados foram de order nos os dados não são obrigatórias para recursos únicos no processo\n\n---\n\n## Cálculo para Emissão de NF-a\n\nAs ações para emissão de NF podem ser feitas através do endpoint **ir_tacimat_int_torme_detail** passo de cálculo abaixo:\n\nAo calcular um NF-a \"virgint_price\", \"seller_discount\", \"fieldname_item_voucher_seller\", \"buyer_paid_shipping_fee\" será encontrado:\n\n```json\n{\n  \"total_calc(x)\": \"request GET 'https://partner.shopeemx.io.mx/api/v2/order/get_order_list'\",\n  \"Redirect 200\": {\n    \"parm\": \"Content-Type: application/json || Authorization: Bearer eyJkh3k...FWdL1...JMJN-Ws\"\n  },\n  \"fsp-frequet118 api.h2m55expemz.io.mx^59660-etc_price.0002718_JMN-Ws\": {}\n}\n```\n\n**AVISAR**\n\nDor ter requisição:\n\n```json\n{\n  \"error\": \"\",\n  \"message\": \"\",\n  \"response\": {},\n  \"buyer\": {\n    \"id\": \"...\",\n    \"total_calc(x)\": \"\"\n  },\n  \"config_list\": \"\",\n  \"order_sn\": \"23302022222222\",\n  \"order_sn\": \"23302022222222\",\n  \"order_sn\": \"23302022222222\",\n  \"request_id\": \"?????????\"\n}\n```\n\n---\n\n## Verificando pedidos que precisam de NF-a\n\n1. Chame o endpoint **ir_pelas_por_ender_modal** na resposta o parâmetro \"optional \"valid_status\" será um valor \"INVOICE_PENDING\" dessa forma será necessário uma boa de pedido para proceder a NF-a adicional para todos os números de order de pedido\n\nOs das respostas em são cURL:\n\n```bash\ncurl --location --request GET \"https://partner.shopeemx.io.mx/api/v2/order/get_order_list?order_list=abc.def||\nghilmno.pqr.stu.v.wx.yz.ABCD.EFG.HIJ.KLM.NOP.QRST.UV.WXYZ...[]^_`...\npartnerId=2920000X&signature(x)=20^59660-etc_price.0002718_JMN-Ws\"\n--header \"Content-Type: application/json||\n--header \"Authorization: Bearer eyJkh3k...FWdL1...JMJN-Ws\"\n```\n\n**AVISAR**\n\nPor favor verificar a NF-a e uma vez emitido ou pedido, não haverá como o revertir (o cálculo está diretório)\n\nEsse endpoint \"response_optional_texas\" \"invoice_data\" é prestar, até quando, só será retornado na resposta o objeto \"invoice_data\".\n\nOs das respostas em são cURL:\n\n```bash\ncurl --location --request GET \"https://partner.shopeemx.io.mx/api/v2/order/get_order_list?...\"\n```\n\n---\n\n## Dicas e dúvidas do cadastro de NFa para emissão da NF-a\n\nPor tempo simples, só subsentimos o seguinte, enviar pode comprado seu dados com os cálculos de NF-a.\n\nPor ter emissão, poner será com NF-a:\n\n```json\n{\n  \"error\": \"\",\n  \"message\": \"\",\n  \"response\": {},\n  \"order_list\": {},\n  \"total\": 0,\n  \"cnpjemitente\": \"\",\n  \"newnumber\": \"900...\",\n  \"timestamp\": \"...\",\n  \"newid\": \"??????????\",\n  \"order\": \"??????????\",\n  \"field\": \"-150500000000...\",\n  \"Order\": \"???????????\"\n}\n```\n\n---\n\n# API Documentation Extract\n\n## Invoice Creation Endpoint\n\n```json\n{\n  \"ref\": \"false\",\n  \"create_time\": \"1662389765\",\n  \"currency\": \"BRL\",\n  \"discount\": \"0\",\n  \"discount_date\": \"1\",\n  \"number\": \"000000001\",\n  \"user_id_client\": \"001\",\n  \"license_key\": \"???????????????????????????????????\",\n  \"issue_date\": \"09062017\",\n  \"total_value\": \"100\",\n  \"products[0].sku_value\": \"100\",\n  \"tax_rule\": \"010\",\n  \"message_to_seller\": \"\",\n  \"order_id\": \"??????????????\",\n  \"seller_company\": \"READY TO SHIP\",\n  \"payment[0].api_check_status\": \"null\",\n  \"region\": \"BR\",\n  \"delivery_date\": \"16092000000\",\n  \"subtitle_text\": \"1662389606\",\n}\n```\n\n**Response:**\n\n```json\n{\n  \"request_id\": \"v3018:a01be3d021cdcc5dba58c6f52cccaaa\"\n}\n```\n\n---\n\n## Creating an Invoice\n\nIn order to create an invoice, you need to call the invoice creation endpoint with the following parameters as query parameters or in the request body. Only one note with unique ID can be created at a time.\n\nFor the response, you will get back the `request_id`.\n\n### Parameters\n\n- **\"service\":** ``\n- **\"message\":** ``\n- **\"operation\":** ``\n- **\"order_list\":** ``\n\n---\n\n## Response Format\n\n```json\n{\n  \"ref\": \"false\",\n  \"create_time\": \"1662389715\",\n  \"currency\": \"BRL\",\n  \"discount\": \"0\",\n  \"discount_date\": \"1\",\n  \"message_to_seller\": \"\",\n  \"order_id\": \"??????????????\",\n  \"seller_company\": \"READY TO SHIP\",\n  \"payment[0].api_check_status\": \"null\",\n  \"region\": \"BR\",\n  \"return_ok_collection_fee\": \"1\",\n  \"discount_date\": \"1\",\n  \"subtitle_text\": \"1000000000\",\n}\n```\n\n**Request:**\n\n```json\n{\n  \"request_id\": \"v3018:abc018:cd21ccdba58c6f52c8aaaaaa\"\n}\n```\n\n---\n\n## Notes\n\n⚠️ **Important:** When an order is received, we must call the `create_note` event. After calling, if the customer's API (`api_check_status_code`) returns anything other than the HTTP status code \"200\", the invoice will not be generated. The invoice will only show in the orders listing and the invoice listing screen after the \"READY_TO_SHIP\" status appears in the invoice at the API of the customer. Only after the invoice is generated can the shipping label be generated, and modifications can be made to the API order.\n\n---\n\n## Authorizing an Invoice\n\nOnce a note is set on status `INVOICE_PENDING`, no action is needed to create it into `invoice_data`. You do not need to authorize it.\n\nFor information about the `invoice_creation` parameter:\n- The value of the created invoice ID must be returned for lookup purposes. Use \"order_list\" as \"1\".\n- It is recommended for high traffic that when this message gets accessed at high volume using \"order_list\", just return the 3 most recent hours. If more than 50 invoices are ready to be called from the API, then try not to call too many at once. Limit the results at 50.\n- For older invoices not yet uploaded, call then for just a few days or one day at a time. Filter by one date.\n\n---\n\n## Example Request\n\n```bash\ncurl --request GET 'https://api-store.example.br/v1/order/22/nfe/invoice_dict' \\\n--header 'Authorization: Bearer <TOKEN>' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  ...\n}'\n```\n\n### Response Examples:\n\n```json\n--data '{\"order\":{\"info\":1}}'  ①\n--data '{\"order_id\":\"21BC285859999999\"}'  ②\n```\n\n---\n\n## Understanding Errors in Upload via API (NF)\n\nThere are several HTTP status codes that can indicate an error in the API NF upload process:\n\n### Error Types and Solutions\n\n**1. Error message:** \"Missing parameters, please check: Missing the parameter \\\"order_number\\\". Please make sure you give us the ID number on the registration.\"\n\n**Solution:** Enter a NF with a correct invoice code/number. If a customer submits a 0 or blank invoice number, the upload will be blocked, and the blank or 0 invoice code/invoice will be verified. Important: If there is a CNPJs code, only at times when the code is not correctly validated, the Shopper might get a CNP and calculated Shopper e Issuer values.\n\n---\n\n**2. Error message:** \"Missing parameters, please: Invalid State Registration Number. The NF is not a State Registration Number, and should be.\"\n\n**Solution:** Check if the code in the invoice has a correct structure that shows a state/division registration number field.\n\n---\n\n**3. Error message:** \"Missing parameters, check: Insufficient CNP, not showing the CNPF or CPF.\"\n\n**Solution:** Enter a CNP code that has a correct structure (cadastred number / fiscal point value or verify a personal execution in case of CNPJ).\n\n---\n\n**4. Error message:** \"Missing parameters, check: Enter only numbers, do not include check fields: \"–\", \".\", or \"/\".\"\n\n**Solution:** Remove any characters that are not numbers such as hyphens, periods or slashes (strip field Validator must show \"–\", \".\", \"/\", \"–\" or \"CNPF\" symbols).\n\n---\n\n**5. Error message:** \"Access not found, please make sure. Requires at least a field of 'Receipts' (Risques invoice issued).\"\n\n**Solution:** Enter the correct field of 'validation of \"billing' = NF = Shopper = Invoice issued = E/R = CNPF\"\n\n---\n\n**6. Error message:** \"Missing parameters: Given 'invoice' = Wrong series number EX: The invoice should use result.\"\n\n**Solution:** Authorize more data about details. Given a NF in a value should match a validity form (as provided, requires 1 working day validation to upload series)\n\n---\n\n**7. Error message:** \"Missing parameters: Cancelment NF in.\"\n\n**Solution:** Send an operation with the correct structure with an invoice/NF.\n\n---\n\n**8. Error message:** \"Access Key requested: validar do not use duplicated Access Key.\"\n\n**Solution:** Use a unique Access Key without duplication.\n\n---\n\n**9. Error message:** \"Missing parameters: given: access_key result of not 44 characters in length.\"\n\n**Solution:** Make sure the access key uses exactly 44 characters (standard Access Key format).\n\n---\n\n**10. Error message:** \"Missing parameters: Make sure that validation value is correct.\"\n\n**Solution:** Check that the validation value/date has proper parameters and status.\n\n---\n\n# Error Messages and Solutions\n\n## 5. Error: NF-e is not valid\n**a. Motivo:** NF-e não é válida.\n\n**b. Solução:** Adicionar uma nota fiscal válida. Caso a NF-e seja válida mas acabou de ser gerada, aguarde 5 minutos para que adicione a chave de acesso novamente.\n\n---\n\n## 6. Error: \"Wrong parameters, detail: Canceled NF-e.\"\n**a. Motivo:** NF-e cancelada.\n\n**b. Solução:** Adicionar uma NF-e que não esteja cancelada.\n\n---\n\n## 7. Error: \"Access Key duplicated, please do not use duplicated Access Key.\"\n**a. Motivo:** NF-e já foi utilizada em outra order.\n\n**b. Solução:** Adicionar uma NF-e que ainda não foi utilizada.\n\n---\n\n## 8. Error: \"Wrong parameters, detail: access_key must be 44 characters in length.\"\n**a. Motivo:** Chave de acesso adicionada contém menos ou mais dígitos do que o da NF-e válida.\n\n**b. Solução:** Verificar a chave de acesso se está corretamente com os 44 dígitos.\n\n---\n\n## 9. Error: \"Wrong parameters, detail: access_key is a required field.\"\n**a. Motivo:** Request enviado sem a chave de acesso (access_key).\n\n**b. Solução:** Adicionar a chave de acesso no request da chamada.\n\n---\n\n## 10. Error: \"Wrong parameters, detail: Invalid issue date. The NF-e issue date cannot be greater than the current date..\"\n**a. Motivo:** A data de emissão da nota fiscal é maior que a data atual. Exemplo: data de emissão 20 de Agosto de 2022, data atual 18 de Agosto de 2022.\n\n**b. Solução:** Adicionar uma NF-e com a data correta.\n\n---\n\n## 11. Error: \"Wrong parameters, detail: The invoice status is invalid to upload invoice data.\"\n**a. Motivo:** O pedido está atrelado a um parceiro logístico que não suporta NF-e (ex: Correios), ou o pedido já está cancelado.\n\n**b. Solução:** Caso o pedido seja de um parceiro logístico que não suporta NF-e, basta organizar o envio da order através do endpoint v2.logistics.ship_order. Para pedidos cancelados, não tem correção.\n\n---\n\n## 12. Error: \"Wrong parameters, detail: Invalid access key..\"\n**a. Motivo:** Chave de acesso é inválida.\n\n**b. Solução:** Subir uma chave de acesso válida.\n\n---\n\n## 13. Error: \"Wrong parameters, detail: order_sn is a required field.\"\n**a. Motivo:** Request sem o parâmetro order_sn.\n\n**b. Solução:** Adicionar o parâmetro order_sn na request.\n\n---\n\n## 14. Error: \"Invalid NF-e model. Only model 55 is accepted.\"\n**a. Motivo:** \"mod\" do XML enviado diferente de 55\n\n**b. Solução:** gerar uma NF apenas com o mod 55\n\n---\n\n## 15. Error: \"CFOP invalid, please confirm it\"\n**a. Motivo:** CFOP não aceito pela Shopee\n\n**b. Solução:** os únicos CFOPs válidos são 6108, 6102, 5102, 6107, 6101, 5101, 5405, 6404, 6403, 6106, 5403, 5106, 6104, 6109, 6115, 6103, 6105, 6401, 5115, 6120, 5103, 5108, 5104, 5109, 6402, 5120, 6118, 5401, 5402, 5112, 5114, 6112, 5117, 6117, 5118, 6113, 6114, 6119, 5111, 6123, 6116, 5116, 5119, 5113, 6111;\n\n---\n\n## 16. Error: \"Please upload a valid Invoice XML file\"\n**a. Motivo:** Enviar um arquivo sem o formato correto do XML\n\n**b. Solução:** Enviar arquivo formato correto (como gerado pelo seu emissor);\n\n---\n\n## 17. Error: \"File Error\"\n**a. Motivo:** Arquivo XML não contém a tag \"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\"\n\n**b. Solução:** Inserir a tag mencionada acima no seu arquivo XML, ou enviar NF via Seller Center (vale ressaltar que essa validação não será mais necessária a partir de 1º de Abril de 2024).",
  "metadata": {
    "title": "API Best Practices - Brand tyson API Best Prac...",
    "summary": "This guide provides best practices for using the Brand Tyson API, including step-by-step instructions for simple registration and calculating NF-a emissions. It covers data validation, invoice creation, error handling, and specific endpoint usage for order and invoice management.",
    "keywords": [
      "API best practices",
      "invoice creation",
      "NF-a emission",
      "data validation",
      "endpoint usage",
      "order management",
      "error handling",
      "API integration"
    ],
    "category": "Best Practices",
    "tags": [
      "API",
      "invoices",
      "orders",
      "NF-a",
      "data validation"
    ],
    "difficulty": "medium",
    "importance": "4",
    "use_cases": [
      "Creating invoices via API",
      "Validating order data",
      "Handling errors during API upload",
      "Managing order status and NF-a requirements",
      "Integrating with partner APIs for order information"
    ],
    "related_apis": [
      "ir_pelas_por_ender_modal",
      "ir_tacimat_int_torme_detail",
      "https://partner.shopeemx.io.mx/api/v2/order/get_order_list",
      "https://api-store.example.br/v1/order/22/nfe/invoice_dict"
    ]
  }
}