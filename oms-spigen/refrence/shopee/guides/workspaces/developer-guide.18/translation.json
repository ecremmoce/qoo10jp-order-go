{
  "document_id": "developer-guide.18",
  "document_type": "guide",
  "platform": "shopee",
  "content_ko": "# 푸시 메커니즘 웹훅\n\n## 시작하기 - 푸시 메커니즘 웹훅\n\n**참고:** 푸시 웹훅은 일반적으로 알려진 웹훅과는 달리 Shopee 콘솔에서만 지원됩니다.\n\nShopee Open Platform에서 푸시 메커니즘이 작동하는 방식에 대한 개요는 다음과 같습니다.\n1. 귀하의 샵은 앱에 웹훅 URL을 생성하고 이를 콜백 URL에 입력합니다.\n2. 이벤트(주문 업데이트, 상품 업데이트 등) 발생 시 Shopee는 귀하의 콜백 URL로 요청을 보냅니다.\n3. Shopee는 정의된 콜백 URL로 HTTP POST 요청을 보냅니다.\n4. 귀하의 서버는 이를 인지하고 성공적인 HTTP 응답을 제공합니다.\n\n⚠️ **참고:** Shopee Open Platform의 푸시 메커니즘 웹훅은 특정 이벤트에 대한 데이터가 변경되었음을 알려주는 역할만 합니다. 상품 데이터를 검색하려면 API를 호출하여 변경된 데이터를 검색해야 합니다.\n\n## 푸시 메커니즘 알림 이해하기\n\nShopee Open Platform에서 사용할 수 있는 웹훅(푸시)에는 5가지 범주가 있습니다.\n1. Shopee - 샵 인증 및 결제 분쟁 업데이트를 위한 웹훅\n2. 주문 - 주문 업데이트를 위한 웹훅\n3. 마케팅 - 상품 프로모션 활동 추적을 위한 웹훅\n4. 상품 - 상품 정보, 재고 및 브랜드 등록 프로세스 업데이트를 위한 웹훅\n5. 채팅 - 새로운 구매자 메시지를 위한 웹훅\n\n인기도 순으로 정렬된 아래 푸시 알림에 대해 자세히 알아보세요.\n\n## Shopee 푸시\n\n### 샵 인증 (코드: 1)\n셀러가 귀하의 앱이 해당 샵 데이터에 액세스하도록 인증할 때 샵 및 판매자 ID의 인증 목록에 대한 알림을 받습니다.\n\n### 샵 인증 해제 (코드: 2)\n셀러가 귀하의 앱이 해당 데이터에 액세스하는 것에 대한 인증을 취소할 때 샵 및 판매자 ID의 애플리케이션 목록에 대한 알림을 받습니다.\n\n⚠️ **참고:**\n- 귀하의 앱 또는 셀러 센터를 통한 다른 Shopee 인증 전에\n- 인증 해제는 샵을 통해 수행되며, 적절한 샵 및 판매자 ID 목록을 추론합니다. 동일한 판매자를 인증한 샵을 보유한 파트너의 경우, 기본 계정으로 알림이 전송됩니다. shop_id가 반환되지 않으면 ID를 확인할 수 없으므로 기본 계정 ID만 반환합니다.\n\n### 샵/판매자 제재 (코드: 13)\n진행 중인 인증이 있는 샵 및 판매자 ID 목록과 함께 샵이 감지되면 알림을 받습니다. 그런 다음 이메일을 통해 해당 이벤트의 영향을 받는 셀러에게 연락합니다. 계정 상태에 대한 사전 지식이 없어 서비스 중단을 방지하는 데 도움이 됩니다.\n\nℹ️ **참고:** 귀하의 앱에 대한 셀러의 인증 또는 해당 샵 데이터에 대한 액세스는 1년 동안만 유효합니다. 인증 기간이 만료되면 셀러는 다시 인증해야 합니다.\n\n- Shopee 업데이트 (코드: 5)\n모든 Shopee 플랫폼 업데이트에 대한 알림을 즉시 받습니다.\n\n## 주문 푸시\n\n### 주문 상태 (코드: 3)\n모든 주문 상태 업데이트에 대한 알림을 즉시 받습니다. 여기에는 배송 전에 발생하는 주문 취소가 포함되므로 즉시 조치를 취하는 데 도움이 됩니다.\n\n### 주문 추적 번호 업데이트 (코드: 4)\n주문 추적 번호가 업데이트될 때 즉시 알림을 받아 신속하게 지원하고 Get Tracking Number API를 반복적으로 폴링하여 실시간 상태를 가져올 필요가 없습니다.\n\nℹ️ **참고:** 모든 추적 번호 파트너는 배송 문서에 필요할 수 있는 추적 번호를 먼저 제공하거나 업데이트합니다.\n\n### 배송 문서 상태 업데이트 (코드: 8)\n배송 문서 상태가 \"READY\" 또는 \"FAILED\"일 때 즉시 알림을 받아 Get Shipping Document Status API를 반복적으로 호출할 필요가 없으며 배송 문서 수집 지연을 방지할 수 있습니다.\n\n## 마케팅 푸시\n\n### 상품 프로모션 (코드: 7)\n상품 또는 SKU가 캠페인 또는 프로모션 이벤트 참여의 영향을 받는 즉시 알림을 받습니다. 또한 실패 상태의 이유를 확인하라는 메시지가 표시됩니다. 이렇게 하면 상품 또는 SKU가 업데이트되기 전에 캠페인에 상품을 추가할 수 있습니다(예: 상품이 단종된 경우).\n\n### 묶음 할인 (코드: 12)\n묶음 할인 업데이트 상품이 프로모션 이벤트에 추가/제거되거나 프로모터의 시작/종료 시간이 업데이트될 때 즉시 알림을 받습니다.\n\n## 상품 푸시\n\n### 상품 상태 이벤트 (코드: 6)\n상품 목록 데이터가 자동 시행 이벤트에 사용되는 즉시 알림을 받습니다. 셀러가 재고 변경 사항을 통합하도록 알립니다.\n\n### 브랜드 등록 (코드: 11)\nℹ️ **참고:** 정부 및 공인 셀러가 Shopee에서 비즈니스를 수행하는 데 도움이 되는 특별한 자료와 이벤트가 포함된 예약된 상품 데이터. 파트너가 승인되면 이벤트를 활성화하거나 성공적으로 거래된 비디오 파일로만 수행할 수 있으므로 비디오를 포함하는 상품 목록을 업데이트합니다.\n\n승인된 비디오 콘텐츠를 업로드한 파트너의 판매 권한에 대한 알림을 받습니다. 비디오는 또한 성공적으로 안내하는 비디오 URL입니다. 트랜스코딩에 성공하면 video_url 속성을 사용하여 상품 목록을 추가하거나 업데이트할 수 있습니다.\n\n### 거부된 상품 (코드: 9)\nShopee에서 거부 사유에 대한 상품 업데이트를 받아 위반 사유를 확인합니다.\n\n### 브랜드 불만 (코드: 10)\n승인, 거부 또는 기존 브랜드와 병합을 포함하여 브랜드 등록 애플리케이션 결과에 대한 업데이트를 받습니다.\n\nℹ️ **참고:** 셀러는 **IP 관련 문제 보고서** API 또는 Shopee 검토를 위해 셀러 센터를 통해 브랜드를 등록할 수 있습니다. 검토가 완료되면 결과에 대한 알림이 전송됩니다.\n\n## 채팅 푸시\n\n### 판매자 채팅 (코드: 14) - 채팅 웹훅 알림\n쇼핑객이 구매자로부터 메시지를 보낼 때 즉시 알림을 받습니다.\n\n## 푸시 메커니즘 구독\n\nℹ️ **참고:** Shopee Open Platform 콘솔이 푸시 메커니즘 페이지에 액세스하기 전에 관련 앱을 선택하고 푸시 구성 설정을 선택합니다.\n\n### 푸시 메커니즘\n\n[다음 열이 있는 푸시 메커니즘 설정 표:]\n- 푸시 메커니즘 | 샵 파트 | 라인 파트 | 링크 푸시 파트 상태 | 푸시 백 구성 | 테스트\n\n[행에는 샵 인증, 샵 푸시, 상품 푸시 등과 같은 다양한 푸시 유형에 대한 설정이 포함되어 있으며 토글 스위치는 화살표로 표시됩니다.]\n\n⚠️ **참고:** 정의된 콜백 URL의 유효성을 확인하기 위해 Shopee는 콜백 URL을 정의하거나 업데이트할 때 콜백 URL로 HTTP POST 요청을 보냅니다. 귀하의 서비스가 GET 또는 POST 페이지에 응답할 수 있는지 확인하십시오.\n\n⚠️ 콜백 URL이 성공적으로 확인되면 알림을 받고자 하는 관련 푸시 웹훅을 선택합니다.\n\n### 테스트 푸시 설정\n\n[다음 열이 있는 테스트 구성 옵션 표:]\n- 이벤트 유형 | 푸시 메커니즘 | 푸시 이벤트 | 테스트 코드 | [토글 표시기]\n\n[샵 인증, 샵 푸시, 상품 푸시, 주문 푸시 등과 같은 다양한 푸시 유형과 해당 코드 및 상태 표시기가 나열된 여러 행]\n\n⚠️ **참고:** Shopee Open Platform 콘솔 또는 **Push config** API를 통해 푸시 설정을 관리할 수 있습니다.\n\n푸시 알림(웹훅)의 가용성은 앱 유형에 따라 다르며 자세한 내용은 아래 표를 참조하십시오.\n\n### 앱 유형 - 사용 가능한 알림\n\n**Original:**\n- 구매자-Shopee 결과 푸시(코드: 13)를 제외한 모든 푸시 알림\n\n**ERP 시스템:**\n- 웹훅 푸시(코드: 10)를 제외한 모든 푸시 알림\n\n**셀러-Shopee 시스템:**\n- 모든 푸시 알림\n\n**상품 관리:**\n- Shopee 푸시\n  - 샵 인증 이벤트 (코드: 1)\n  - 샵 인증 해제 이벤트 (코드: 2)\n  - 샵/판매자 제재 이벤트 (코드: 13)\n  - Shopee 업데이트 (코드: 5)\n\n---\n\n# 개발자 API 문서\n\n## 모듈 액세스 레벨\n\n### 어필리에이트\n- **사용 가능한 푸시 알림:** 쇼핑객 몰래 보기(코드 10)를 제외한 모든 푸시 알림\n\n### ERP 시스템\n- **사용 가능한 푸시 알림:** 웹훅 푸시(코드 10)를 제외한 모든 푸시 알림\n\n### 셀러-사내 시스템\n- **사용 가능한 푸시 알림:** 모든 푸시 알림\n\n---\n\n## 프로토콜 관리\n\n### 쇼핑객 푸시\n- 샵 인증 푸시 (코드 1)\n- 샵 인증 완료 푸시 (코드 2)\n- 샵 인증 취소/만료 푸시 (코드 12)\n- 쇼핑객 업데이트 (코드 5)\n\n### 상품 푸시\n- 상품 구매 푸시 (코드 6)\n- 비디오 업로드 푸시 (코드 11)\n- 리뷰 업로드 푸시 (코드 9)\n\n### 정산 푸시\n- 상품 구매 푸시 (코드 7)\n- 프리미엄 업로드 푸시 (코드 8)\n\n---\n\n## 주문 관리\n\n### 쇼핑객 푸시\n- 샵 인증 푸시 (코드 1)\n- 샵 인증 완료 푸시 (코드 2)\n- Open API 인증 만료 푸시 (코드 12)\n- 쇼핑객 업데이트 (코드 5)\n\n### 주문 푸시\n- 주문 상태 푸시 (코드 3)\n- 주문 상태 변경 푸시 (코드 4)\n- 샵 인증 완료 푸시 (코드 16)\n\n---\n\n## 회계 및 재무\n\n### 쇼핑객 푸시\n- 샵 인증 푸시 (코드 1)\n- 샵 인증 완료 푸시 (코드 2)\n- Open API 인증 만료 푸시 (코드 12)\n\n---\n\n## 마케팅\n\n### 쇼핑객 푸시\n- 샵 인증 푸시 (코드 1)\n- 샵 인증 완료 푸시 (코드 2)\n- Open API 인증 만료 푸시 (코드 12)\n\n### 주문 푸시\n- 주문 상태 변경 푸시 (코드 4)\n- 예약된 재고 변경 푸시 (코드 6)\n\n### 정산 푸시\n- 정산 완료 푸시 (코드 14)\n- 대량 프로모션 푸시 (코드 7)\n- 프리미엄 업로드 푸시 (코드 8)\n\n---\n\n## 고객 서비스\n\n### 쇼핑객 푸시\n- 샵 인증 푸시 (코드 1)\n- 샵 인증 완료 푸시 (코드 2)\n- 샵 인증 취소/만료 푸시 (코드 12)\n- 쇼핑객 업데이트 (코드 5)\n\n### 주문 푸시\n- 주문 상태 푸시 (코드 15)\n\n---\n\n## 중요 사항\n\n⚠️ **주의:** 화이트리스트에 등록된 IP 주소를 통해 직접 액세스하는 시스템을 사용하는 개발자의 경우, 프로덕션 환경 IP [링크]를 사용하십시오.\n\n⚠️ **경고:** 프로덕션 또는 비즈니스 목적으로 샌드박스 환경을 사용하지 마십시오.\n\n⚠️ 테스트하는 경우 샌드박스 환경 내에서 API 호출을 수행하십시오.\n\n⚠️ **프로덕션:** 공식 비즈니스 서비스 또는 프로덕션 환경에만 프로덕션 환경을 사용하십시오.\n\n---\n\n## 푸시 인증\n\n사이버 공격을 방지하기 위해 각 푸시 요청에 대한 인증 서명을 제공했으며, 이는 HTTP 요청/웹훅의 Authorization 필드에서 발행할 수 있습니다. 이를 통해 쇼핑객의 인증 정보를 직접 확인할 수 있습니다.\n\n인증 서명은 base64(HMAC-SHA256($secret_key, $base_string)) 메서드를 사용하여 생성됩니다.\n\n푸시 요청에서 생성된 인증 서명과 일치하는지 확인하면서 인증 서명을 생성하려면 서명 문자열을 생성하는 방법은 다음과 같습니다.\n\n### 1단계: URL + 응답 콘텐츠를 서명 기본 문자열로 사용합니다.\n\n예:\n```\nhttp://www.url.com/receive?shop_id=shop_id&authorization_t_user=shop_id.123 is authorized base64string : date : shop_URL : host data : timestamp : HYT43BjSE\n```\n\n경로 기본/응답 콘텐츠 메서드는 권장되지 않습니다.\n\n### 2단계: Shopper Open Platform 콘솔에서 앱 세부 정보의 인스턴스 기본 문자열 및 파트너 키\n\n### 3단계: 서명 기본 문자열 및 파트너 키를 사용하여 HMAC-SHA256 해싱 알고리즘으로 서명을 생성합니다.\n\nHMAC 서명 함수의 출력은 이진 문자열입니다. base64로 서명 문자열을 생성하려면 인코딩해야 합니다. 아래 샘플 코드를 참조하십시오.\n\n**Python:**\n\n```python\nimport hmac\nimport hashlib\nimport base64\n\ndef calculate_signature(secret_key, base_string, authorization):\n    hmac_obj = hmac.new(secret_key.encode(), base_string.encode(), hashlib.sha256)\n    return base64.b64encode(hmac_obj.digest()).decode()\n\n# Test\nprint(calculate_signature(\"secretpartner\", \"requestBody\", \"base64string\", \"authorization\"))\n\npackage_verify\n```\n\n**Java:**\n\n```java\nimport javax.crypto.Mac;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.nio.charset.StandardCharsets;\nimport java.util.Base64;\n\npublic class HmacExample {\n    public static String calculateSignature(String secretKey, String baseString) throws Exception {\n        Mac hmacSHA256 = Mac.getInstance(\"HmacSHA256\");\n        SecretKeySpec secretKeySpec = new SecretKeySpec(secretKey.getBytes(StandardCharsets.UTF_8), \"HmacSHA256\");\n        hmacSHA256.init(secretKeySpec);\n        byte[] hash = hmacSHA256.doFinal(baseString.getBytes(StandardCharsets.UTF_8));\n        return Base64.getEncoder().encodeToString(hash);\n    }\n\n    // Test method\n    public static void main(String[] args) {\n        try {\n            String result = calculateSignature(\"secretpartner\", \"requestBody\");\n            System.out.println(result);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n```\n\n**Node.js:**\n\n```javascript\nconst crypto = require('crypto');\n\nfunction calculateSignature(secretKey, baseString) {\n    const hmac = crypto.createHmac('sha256', secretKey);\n    hmac.update(baseString);\n    return hmac.digest('base64');\n}\n\n// Test\nconsole.log(calculateSignature(\"secretpartner\", \"requestBody\"));\n```\n\n**PHP:**\n\n```php\nfunction calculateSignature($secretKey, $baseString) {\n    $hmac = hash_hmac('sha256', $baseString, $secretKey, true);\n    return base64_encode($hmac);\n}\n\n// Test\necho calculateSignature(\"secretpartner\", \"requestBody\");\n```\n\n---\n\n# 푸시 메커니즘 알림 트리거\n\n푸시 메커니즘 알림을 구독하고 인증 서명을 생성한 후 각 푸시 알림에 설정된 앱 파트너 ID가 샵에서 이미 인증되었는지 확인해야 합니다. 그렇지 않은 경우 먼저 **샵 인증**을 완료하십시오.\n\n샵 인증이 완료되면 관련 이벤트가 발생할 때 푸시 메커니즘을 통해 알림을 받게 됩니다. **푸시 메커니즘 알림을 트리거할 수 있는 이벤트**에 대해 자세히 알아보십시오. 콜백 URL이 요청에 대한 응답을 제공하는지 확인하십시오.\n\n## 특정 샵의 알림 차단\n\n특정 샵에 대한 알림을 받지 않으려면 다음 방법을 사용하십시오.\n\n1. v2 **push set_push_config** API의 blocked_shop_id 필드를 사용합니다(최대 500개의 샵 차단).\n2. Shopee Open Platform 콘솔의 **푸시 메커니즘** 페이지에서 샵 ID 목록을 입력합니다(최대 500개의 샵 차단).\n\n---\n\n# 푸시 메커니즘 재시도 로직\n\n푸시 메커니즘에서 반복된 알림을 받지 않으려면 다음 HTTP 응답 요구 사항에 따라 응답하도록 콜백 URL을 설정하십시오.\n\n- 2xx 상태 코드를 포함합니다.\n- 빈 본문을 포함합니다.\n\n⚠️ **참고: 모든 푸시(웹훅)는 반복된 알림에 대해 서로 다른 최대 알림 수와 간격을 지원합니다. 알림에 응답하는 데 성공률이 낮은 앱에 대한 다음 섹션 푸시 메커니즘 경고/비활성화 로직을 참조하십시오.**\n\n자세한 내용은 **푸시 메커니즘 문서**를 참조하십시오.\n\n---\n\n# 푸시 메커니즘 경고/비활성화 로직\n\nShopee Open Platform은 푸시 메커니즘 알림에 응답하는 데 성공률이 낮은 앱에 대한 경고/비활성화 로직을 갖추고 있습니다. 이러한 앱의 경우 적절한 조치를 취할 것입니다. 경고 이메일이 귀하에게 전송되거나 푸시 메커니즘 알림 구독이 결국 비활성화될 수도 있습니다.\n\n⚠️ **참고: 성공률은 성공적인 푸시 항목과 실패한 푸시 항목을 비교하여 계산됩니다. 실패한 푸시는 Shopee Open Platform이 시간 초과 기간 내에 2xx 상태 코드와 빈 본문이 있는 HTTP 응답을 받지 못한 것으로 정의됩니다.**\n\n자세한 내용은 **푸시 메커니즘 문서**를 참조하십시오.\n\n푸시 메커니즘 경고 및 비활성화 작업에 대한 자세한 내용은 다음과 같습니다.\n\n## 경고 이메일\n\n- 다음과 같은 경우 30분마다 경고 이메일을 받게 됩니다.\n  - 지난 6시간 동안 600개 이상의 푸시 메커니즘 알림이 귀하에게 전송되었고\n  - 귀하의 전체 푸시 성공률이 70% 미만입니다.\n- 성공률이 70% 이상으로 돌아오면 경고 이메일이 전송되지 않습니다.\n\n## 푸시 메커니즘 알림 구독 비활성화\n\n- 다음과 같은 경우 푸시 메커니즘 알림 구독이 비활성화되고 알림 이메일을 받게 됩니다.\n  - 지난 6시간 동안 600개 이상의 푸시 메커니즘 알림이 귀하에게 전송되었고\n  - 귀하의 전체 푸시 성공률이 30% 미만입니다.\n- 콜백 URL을 확인하고 다시 구독하기 전에 푸시 메커니즘 알림을 정상적으로 받을 준비가 되었는지 확인해야 합니다.\n\n---\n\n## ⚠️ 참고\n\n다시 구독한 후 다음과 같은 중요한 사항에 유의하십시오.\n\n- **구독이 비활성화된 기간 동안 놓친 푸시 메커니즘 알림은 받지 못합니다.**\n- **푸시 메커니즘 알림의 성공률 계산은 새 구독의 기록을 기반으로 다시 시작됩니다.**\n\nShopee Open Platform 콘솔 페이지를 통해 현재 푸시 메커니즘 성공률 및 상태를 볼 수 있습니다.\n\n---\n\n## 코드 예제\n\n```java\nthrows NoSuchAlgorithmException, UnsupportedEncodingException, java.security.InvalidKeyException\n{\n    String baseStr = url + \"|\" + requestBody;\n    \n    Mac sha256_HMAC = Mac.getInstance(\"HmacSHA256\");\n    \n    SecretKeySpec secret_key = new SecretKeySpec(partnerKey.getBytes(\"UTF-8\"), \"HmacSHA256\");\n    \n    sha256_HMAC.init(secret_key);\n    \n    String result = Hex.encodeHexString(sha256_HMAC.doFinal(baseStr.getBytes(\"UTF-8\")));\n    \n    return result.equals(authorization);\n}\n```",
  "translated_at": "2025-10-16T08:07:40",
  "char_count": 10088,
  "metadata_ko": {
    "title": "푸시 메커니즘 웹훅",
    "summary": "본 가이드는 Shopee Open Platform의 푸시 메커니즘 웹훅에 대한 개요를 제공합니다. 주문 업데이트, 상품 업데이트, 상점 권한 변경 등 다양한 이벤트에 대한 푸시 알림을 구독하는 방법과 실시간 업데이트 및 효율적인 데이터 검색을 가능하게 하는 방법에 대해 자세히 설명합니다.",
    "keywords": [
      "webhook",
      "push notifications",
      "Shopee Open Platform",
      "API",
      "실시간 업데이트",
      "이벤트 알림",
      "callback URL",
      "상점 권한",
      "order updates",
      "product updates"
    ],
    "category": "통합",
    "tags": [
      "webhooks",
      "push mechanism",
      "shopee",
      "api",
      "notifications"
    ],
    "difficulty": "medium",
    "importance": 5,
    "use_cases": [
      "실시간 주문 상태 업데이트를 수신하여 이행 프로세스를 트리거합니다.",
      "상품 업데이트를 모니터링하여 재고를 동기화 상태로 유지합니다.",
      "상점 권한 변경 사항을 추적하여 액세스 권한을 관리합니다.",
      "프로모션 이벤트 업데이트에 대한 알림을 받아 마케팅 전략을 조정합니다.",
      "새로운 구매자 메시지를 신속하게 처리하여 고객 서비스를 개선합니다."
    ],
    "related_apis": [
      "Get Tracking Number API",
      "Get Shipping Document Status API",
      "Push config API",
      "IP related problem report API"
    ]
  },
  "metadata_translated_at": "2025-10-16T08:07:43"
}